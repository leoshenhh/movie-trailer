extends ./layout/default

block title
  title  Koa Douban 首页

block content
  //- include ./includes/header
  style.
    .card-img-top{

    }
  .container-fluid
    .slidebar
    .content
      .row
        .col-md-6
          .card
            img.card-img-top(src="https://static.runoob.com/images/demo/demo1.jpg",data-video='https://cloud189-shzh-corp.oos-gdsz.ctyunapi.cn/fd135ac7-3ace-4fc4-bdea-cd3881e04a9d.mp4?x-amz-UFID=4136839285722923&x-amz-CLIENTNETWORK=UNKNOWN&x-amz-FSIZE=518782979&response-content-type=video/mp4&Expires=1594286531&x-amz-UID=758808201&response-content-disposition=attachment%3Bfilename%3D%22%C3%A7%C2%A5%C2%9E%C3%A7%C2%9B%C2%BE%C3%A5%C2%B1%C2%80%C3%A7%C2%89%C2%B9%C3%A5%C2%B7%C2%A5S07E01cut.mp4%22&AWSAccessKeyId=4549320003c8aac9538f&x-amz-limitrate=102400&x-amz-CLOUDTYPEIN=CORP&x-amz-CLIENTTYPEIN=UNKNOWN&Signature=NOrC3Wt2XI8Um9qvqpdiUDg0CCI%3D')
            .card-body
              h4.card-title 这是电影标题
              p.card-desc 这是电影描述
            .card-footer
              small.text-muted 1天前更新
        .col-md-6
          .card
              img.card-img-top(src="https://static.runoob.com/images/demo/demo1.jpg",data-video='https://cloud189-shzh-corp.oos-gdsz.ctyunapi.cn/fd135ac7-3ace-4fc4-bdea-cd3881e04a9d.mp4?x-amz-UFID=4136839285722923&x-amz-CLIENTNETWORK=UNKNOWN&x-amz-FSIZE=518782979&response-content-type=video/mp4&Expires=1594286531&x-amz-UID=758808201&response-content-disposition=attachment%3Bfilename%3D%22%C3%A7%C2%A5%C2%9E%C3%A7%C2%9B%C2%BE%C3%A5%C2%B1%C2%80%C3%A7%C2%89%C2%B9%C3%A5%C2%B7%C2%A5S07E01cut.mp4%22&AWSAccessKeyId=4549320003c8aac9538f&x-amz-limitrate=102400&x-amz-CLOUDTYPEIN=CORP&x-amz-CLIENTTYPEIN=UNKNOWN&Signature=NOrC3Wt2XI8Um9qvqpdiUDg0CCI%3D')
              .card-body
                h4.card-title 这是电影标题
                p.card-desc 这是电影描述
              .card-footer
                small.text-muted 1天前更新
      .row
        .col-md-6
          .card
            img.card-img-top(src="https://static.runoob.com/images/demo/demo1.jpg",data-video='https://cloud189-shzh-corp.oos-gdsz.ctyunapi.cn/fd135ac7-3ace-4fc4-bdea-cd3881e04a9d.mp4?x-amz-UFID=4136839285722923&x-amz-CLIENTNETWORK=UNKNOWN&x-amz-FSIZE=518782979&response-content-type=video/mp4&Expires=1594286531&x-amz-UID=758808201&response-content-disposition=attachment%3Bfilename%3D%22%C3%A7%C2%A5%C2%9E%C3%A7%C2%9B%C2%BE%C3%A5%C2%B1%C2%80%C3%A7%C2%89%C2%B9%C3%A5%C2%B7%C2%A5S07E01cut.mp4%22&AWSAccessKeyId=4549320003c8aac9538f&x-amz-limitrate=102400&x-amz-CLOUDTYPEIN=CORP&x-amz-CLIENTTYPEIN=UNKNOWN&Signature=NOrC3Wt2XI8Um9qvqpdiUDg0CCI%3D')
            .card-body
              h4.card-title 这是电影标题
              p.card-desc 这是电影描述
            .card-footer
              small.text-muted 1天前更新
        .col-md-6
          .card
              img.card-img-top(src="https://static.runoob.com/images/demo/demo1.jpg",data-video='https://cloud189-shzh-corp.oos-gdsz.ctyunapi.cn/fd135ac7-3ace-4fc4-bdea-cd3881e04a9d.mp4')
              .card-body
                h4.card-title 这是电影标题
                p.card-desc 这是电影描述
              .card-footer
                small.text-muted 1天前更新
  #myModal.modal.fade.bg-example-model-lg(tabindex='-1',role="dialog",aria-labelledby="myLargeModalLabel",aria-hidden="true")
    .modal-dialog.modal-lg
      #videoModal.modal-content
  include ./includes/script
  script.
    var player = null;
    $(document).ready(function(){
      $('#myModal').on('hidden.bs.modal',function(e){
        if(player && player.pause) player.pause()
      })
      $('.card-img-top').click(function(e){
        var video = $(this).data('video')
        var image = $(this).attr('src')
        $('#myModal').modal('show')
        if(!player){
          player = new DPlayer({
            container: document.getElementById('videoModal'),
            screenshot: true,
            video: {
              url: video,
              pic: image,
              thnumbnails: image
            }
          })
        }else{
          player.swtichVideo({
            url: video,
            pic: image,
            type: 'auto'
          })
        }
      })
    })